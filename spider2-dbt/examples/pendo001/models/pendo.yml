version: 2

models:

  - name: pendo__account
    description: >
      Table capturing accounts - their latest state enhanced with metrics. Includes any custom columns 
      passed through via the `pendo__account_history_pass_through_columns` variable.
    columns:
      - name: account_id
        description: Unique identifier of the account.
        tests:
          - unique 
          - not_null
      - name: first_visit_at
        description: The timestamp (UTC) of when the account or visitor was created. 
      - name: account_id_hash
        description: 32-bit hash of the account ID. 
      - name: last_updated_at
        description: The timestamp (UTC) of when the account was last updated.
      - name: last_visit_at
        description: The timestamp (UTC) of when Pendo last recorded an event for the account.
      - name: count_associated_visitors
        description: Count of visitors associated with the accounts, based on `int_pendo__latest_visitor_account`.
      - name: min_nps_rating
        description: Of associated visitors' most recent NPS ratings, the minimum rating. 
      - name: max_nps_rating
        description: Of associated visitors' most recent NPS ratings, the maximum rating. 
      - name: avg_nps_rating
        description: Of associated visitors' most recent NPS ratings, the average rating. 
      - name: count_active_visitors
        description: Count of visitors who have triggered any kind of event in Pendo. 
      - name: count_page_viewing_visitors
        description: Count of visitors who have performed a page event. 
      - name: count_feature_clicking_visitors
        description: Count of visitors who have performed a feature event. 
      - name: count_active_days
        description: Count of calendar days on which events were tracked for this account. 
      - name: count_active_months
        description: Count of calendar months on which events were tracked for this account. 
      - name: sum_minutes
        description: Total time, in minutes, of logged event activity for this account (based on `event.num_minutes`).
      - name: sum_events
        description: Total number of tracked events for this account (based on `event.num_events`) 
      - name: count_event_records
        description: Count of records in the `EVENT` table logged for this account. 
      - name: average_daily_minutes
        description: Average minutes logged per day for the account (excluding days with 0 events).
      - name: average_daily_events
        description: Average events logged per day for the account (excluding days with 0 events).
      - name: first_event_on
        description: Date on which the first event was tracked for this account.
      - name: last_event_on
        description: Date on which the last event was tracked for this account.
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__account_daily_metrics
    description: >
      Table capturing daily event metrics for tracked accounts, from the day that ane event was first tracked for this 
      account to the current date.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - account_id
            - date_day
    columns:
      - name: date_day
        description: Day for which these metrics were calculated. 
      - name: account_id
        description: Unique identifier for the account. 
      - name: count_active_visitors
        description: Count of visitors who have triggered any kind of event in Pendo on this day. 
      - name: sum_minutes
        description: Total daily time, in minutes, of logged event activity for this account (based on `event.num_minutes`).
      - name: sum_events
        description: Total daily number of tracked events for this account (based on `event.num_events`) 
      - name: count_event_records
        description: Count of records in the `EVENT` table logged for this account on this day. 
      - name: count_pages_viewed
        description: Count of distinct pages viewed by this account.  
      - name: count_features_clicked
        description: Count of distinct features clicked by this account. 
      - name: count_page_viewing_visitors
        description: Count of distinct visitors who triggered pageview events under this account.
      - name: count_feature_clicking_visitors
        description: Count of distinct visitors who triggered feature-click events under this account.

  - name: pendo__feature
    description: Table capturing features - their latest state enhanced with metrics and relational information. 
    columns:
      - name: app_id
        description: Foreign key referencing the `APPLICATION` that the feature is a part of.
      - name: created_at
        description: Timestamp of when the feature was created. 
      - name: created_by_user_id
        description: Foreign key referencing the `USER` that created the feature.
      - name: is_dirty
        description: Boolean value returned if feature is processing at the time of request.
      - name: group_id
        description: Foreign key referencing the `GROUP` (product area) that the feature is tagged under.
      - name: feature_id
        description: Unique identifier of the feature.
        tests:
          - unique 
          - not_null
      - name: is_core_event
        description: Boolean that is true if the feature is tagged as a core event/key feature of the product.
      - name: last_updated_at
        description: Timestamp of when the feature was last updated.
      - name: last_updated_by_user_id
        description: Foreign key referencing the `USER` that last updated the feature.
      - name: feature_name
        description: Name of the feature.
      - name: page_id
        description: Foreign key referencing the `PAGE` that the feature is placed on.
      - name: root_version_id
        description: The unique identifier of the root entity, which nominally matches the public id field of the feature.
      - name: stable_version_id
        description: The unique identifier for the current version of the feature.
      - name: valid_through
        description: Timestamp that indicates when data was last processed.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the feature is tagged under. 
      - name: page_name
        description: Name of the page that the feature lives on. 
      - name: page_created_at
        description: Timestamp of when the feature's page was created. 
      - name: page_valid_through
        description: Timestamp that indicates when data was last processed for the feature's page. 
      - name: app_display_name
        description: Display name of the application that the feature is a part of. 
      - name: app_platform
        description: Platform on which the feature's application is served. 
      - name: created_by_user_full_name
        description: Full name of the internal user who first created the feature. 
      - name: created_by_user_username
        description: Username (probably email) of the internal user who first created the feature. 
      - name: last_updated_by_user_full_name
        description: Full name of the internal user who last updated the feature. 
      - name: last_updated_by_user_username
        description: Username (probably email) of the internal user who last updated the feature. 
      - name: count_visitors
        description: Count of distinct visitors who have clicked on this feature. 
      - name: count_accounts
        description: Count of distinct accounts who have been tracked clicking this feature. 
      - name: sum_clicks
        description: The total sum of click interactions with this feature (based on `num_events`).
      - name: count_click_events
        description: Count of records in `feature_event` logged for this feature. 
      - name: first_click_at
        description: Timestamp of when a visitor first clicked on this feature. 
      - name: last_click_at
        description: Timestamp of when a visitor last clicked on this feature.
      - name: avg_visitor_minutes
        description: Average total time spent on this feature per visitor (ignoring 0-event visitors).
      - name: avg_visitor_events
        description: Average sum of feature click events per visitor (ignoring 0-event visitors).
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__feature_daily_metrics
    description: >
      Table capturing daily event metrics for tracked features, from the day that the feature was created to either 
      it's `valid_through` date or the date of its last tracked event (whichever is later).
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - feature_id
            - date_day
    columns:
      - name: date_day
        description: Day for which these metrics were calculated. 
      - name: feature_id
        description: Unique identifier of the feature. 
      - name: feature_name
        description: Name of the feature. 
      - name: group_id
        description: Foreign key referencing the `GROUP` (product area) that the feature is tagged under.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the feature is tagged under. 
      - name: page_id
        description: Foreign key referencing the `PAGE` that the feature is placed on.
      - name: page_name
        description: Name of the page that the feature lives on. 
      - name: sum_clicks
        description: Total daily number of tracked clicks (based on `event.num_events`) 
      - name: count_visitors
        description: Count of distinct visitors who clicked on the feature on this day.
      - name: count_accounts
        description: Count of distinct accounts that were logged in `feature_event` on this day. 
      - name: count_first_time_visitors
        description: Count of visitors for whom their first interaction with the feature was on this day.
      - name: count_first_time_accounts
        description: Count of accounts for whom their first interaction with the feature was on this day.
      - name: count_return_visitors
        description: Count of visitors who clicked on the feature prior to this day as well.
      - name: count_return_accounts
        description: Count of accounts who clicked on the feature prior to this day as well.
      - name: avg_daily_minutes_per_visitor
        description: For the day, the average time spent interacting with the feature per visitor.
      - name: avg_daily_clicks_per_visitor
        description: For the day, the average sum of clicks per visitor. 
      - name: percent_of_daily_feature_clicks
        description: Relative to the total number of clicks on ALL features, the percentage that were clicks on this feature. 
      - name: percent_of_daily_feature_visitors
        description: Relative to the total number of visitors clicking on ALL features, the percentage that were visitors clicking on this feature. 
      - name: percent_of_daily_feature_accounts
        description: Relative to the total number of accounts clicking on ALL features, the percentage that were accounts clicking on this feature. 
      - name: count_click_events
        description: Count of records in `feature_event` for this feature on this day. 

  - name: pendo__feature_event
    description: > 
      Table capturing all recorded click events matching tagged features. Contains custom
      columns passed through via the `pendo__feature_event_pass_through_columns`, as well as 
      any `visitor` and `account` custom columns. 
    columns:
      - name: account_id
        description: Foreign key referencing the `ACCOUNT` associated with the event, if any.
      - name: app_id
        description: Foreign key referencing the `APPLICATION` that the event was tracked in.
      - name: feature_id
        description: Foreign key referencing the `FEATURE` that the event is tagged with.
      - name: num_events
        description: Number of feature events tracked for this unique combination of day/hour, visitorId, accountId, server name, and IP address.
      - name: num_minutes
        description: Number of feature events minutes tracked for this unique combination of day/hour, visitorId, accountId, server name, and IP address.
      - name: remote_ip
        description: The IP address of the event triggerer.
      - name: server_name
        description: Name of the server (your website) on which the event was tracked.
      - name: occurred_at
        description: Day/hour-part timestamp of when the event occurred.
      - name: user_agent
        description: String identifying the browser and operating system on which the event was triggered.
      - name: visitor_id
        description: Foreign key referencing the `VISITOR` who triggered the event.
      - name: _fivetran_id
        description: Fivetran created id hashed on the `property_*` and `param_*` fields.
      - name: feature_event_key
        description: Unique key hashed on ['visitor_id', 'timestamp', 'account_id', 'server_name', 'feature_id', 'remote_ip', 'user_agent', '_fivetran_id'].
        tests:
          - unique
          - not_null
      - name: previous_feature_id
        description: Foreign key referencing the `feature` that the visitor previously interacted with. 
      - name: previous_feature_event_at
        description: Timestamp of the previous time the visitor interacted with a feature. 
      - name: previous_feature_num_minutes
        description: The time logged for the visitor's previous interaction with a feature. 
      - name: previous_feature_num_events
        description: The number of clicks logged for the visitor's previous interaction with a feature. 
      - name: feature_name
        description: Name of the feature. 
      - name: product_area_id
        description: Foreign key referencing the `GROUP` (product area) that the feature is tagged under.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the feature is tagged under. 
      - name: page_id
        description: Foreign key referencing the `PAGE` that the feature is placed on.
      - name: page_name
        description: Name of the page that the feature lives on. 
      - name: app_display_name
        description: Display name of the application that the feature is a part of. 
      - name: app_platform
        description: Platform on which the feature's application is served. 
      - name: previous_feature_name
        description: Name of the previous feature the visitor interacted with.
      - name: previous_feature_page_id
        description: Foreign key referencing the `page` of the feature that the visitor previously interacted with.
      - name: previous_feature_page_name
        description: Name of the page housing the feature that the visitor previously interacted with.
      - name: previous_feature_product_area_name
        description: Name of the product area (group) that the visitor's previous feature is tagged under.
      - name: previous_feature_product_area_id
        description: Foreign key reference to the product area (group) that the visitor's previous feature is tagged under.
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__guide
    description: >
      Table capturing guides - their latest state enhanced with metrics and relational information. 
      Pendo tracks a variety of events around guides, and event-type-specific visitor-count-metrics are dynamically 
      pivoted out in this table.
    columns:
      - name: app_id
        description: Foreign key referencing the `APPLICATION` that the guide belongs in.
      - name: device_type
        description: The current state of the guide - 'all', 'desktop', 'mobile'.
      - name: created_at
        description: Timestamp of when the guide was created.
      - name: created_by_user_id
        description: Foreign key referencing the `USER` who created the guide. 
      - name: guide_id
        description: Unique identifier of the guide.
        tests:
          - unique
          - not_null
      - name: is_multi_step
        description: Returns true if guide has multiple steps (walkthrough).
      - name: is_training
        description: Boolean that is true if the guide is for training.
      - name: last_updated_at
        description: Timestamp of when the guide was last updated.
      - name: last_updated_by_user_id
        description: Foreign key referencing the `USER` who last updated the guide. 
      - name: launch_method
        description: Activation method of the guide (ie auto, badge, dom).
      - name: guide_name
        description: Name of the guide. 
      - name: published_at
        description: Timestamp of when the guide was officially published.
      - name: recurrence
        description: How frequent the guide is scheduled to recur. 
      - name: recurrence_eligibility_window
        description: Eligible interval in which guides can be repeatedly activated. 
      - name: reset_at
        description: Timestamp of when the guide was reset for visitors. 
      - name: root_version_id
        description: The unique identifier of the root entity, which nominally matches the public id field of the guide.
      - name: stable_version_id
        description: The unique identifier for the current version of the feature.
      - name: state
        description: The current state of the guide. published, staged, draft, and disabled.
      - name: app_display_name
        description: Display name of the application that the guide is a part of. 
      - name: app_platform
        description: Platform on which the guide's application is served. 
      - name: created_by_user_full_name
        description: Full name of the internal user who first created the guide. 
      - name: created_by_user_username
        description: Username (probably email) of the internal user who first created the guide. 
      - name: last_updated_by_user_full_name
        description: Full name of the internal user who last updated the guide. 
      - name: last_updated_by_user_username
        description: Username (probably email) of the internal user who last updated the guide. 
      - name: count_steps
        description: Number of steps that visitors must navigate to complete the guide. 
      - name: count_visitors
        description: Count of visitors who have interacted with the guide. 
      - name: count_accounts
        description: Count of accounts who have been tracked interacting with the guide.
      - name: count_events
        description: Count of records in `guide_event` for this guide.  
      - name: first_event_at
        description: Timestamp of when the guide was first interacted with.
      - name: last_event_at
        description: Timestamp of when the guide was last interacted with.
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.
      - name: count_visitors_guideSeen
        description: Count of visitors who have been presented with a guide.
      - name: count_visitors_guideDismissed
        description: Count of visitors who have dismissed a guide.
      - name: count_visitors_guideActivity
        description: Count of visitors who have interacted with a guide. 
      - name: count_visitors_guideAdvanced
        description: Count of visitors who have advanced a step in a guide. 
      - name: count_visitors_guideTimeout
        description: Count of visitors who have timed out on a guide. 
      - name: count_visitors_guideSnoozed
        description: Count of visitors who have snoozed a guide.
    ref:
      - name: int_pendo__guide_alltime_metrics
      - name: int_pendo__guide_info

  - name: pendo__guide_daily_metrics
    description: >
      Table capturing daily event metrics for tracked features, from the day that the feature was created to 
      the current date. 
      Pendo tracks a variety of events around guides, and event-type-specific visitor-count-metrics are dynamically 
      pivoted out in this table.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - guide_id
            - date_day
    columns:
      - name: date_day
        description: Day for which these metrics were calculated. 
      - name: guide_id 
        description: Unique identifier of the guide.
      - name: guide_name
        description: Name of the guide.
      - name: count_visitors
        description: Count of visitors interacting with the guide on this day.
      - name: count_accounts
        description: Count of accounts interacting with the guide on this day.
      - name: count_guide_events
        description: Count of records in `guide_event` for this guide on this day.
      - name: count_first_time_visitors
        description: Count of visitors interacting with the guide for the first time on this day. 
      - name: count_first_time_accounts
        description: Count of accounts interacting with the guide for the first time on this day. 
      - name: count_visitors_guideSeen
        description: Count of visitors who have been presented with a guide on this day.
      - name: count_visitors_guideDismissed
        description: Count of visitors who have dismissed a guide on this day.
      - name: count_visitors_guideActivity
        description: Count of visitors who have interacted with a guide on this day.
      - name: count_visitors_guideAdvanced
        description: Count of visitors who have advanced a step in a guide on this day.
      - name: count_visitors_guideTimeout
        description: Count of visitors who have timed out on a guide on this day. 
      - name: count_visitors_guideSnoozed
        description: Count of visitors who have snoozed a guide on this day.
    ref:
      - name: int_pendo__calendar_spine
      - name: int_pendo__guide_daily_metrics

  - name: pendo__guide_event
    description: >
      Table capturing various types of events related to guide interactions.
      Contains any `visitor` and `account` custom columns. 
    columns:
      - name: account_id
        description: Foreign key referencing the `ACCOUNT` associated with the event triggerer, if any. 
      - name: app_id
        description: Foreign key referencing the `APPLICATION` the event was triggered in.
      - name: country
        description: Country in which the guide event was recorded.
      - name: guide_id
        description: Foreign key referencing the `GUIDE` that was interacted with.
      - name: guide_step_id
        description: Foreign key referencing the `STEP` within the guide that was interacted with specifically. 
      - name: latitude
        description: Latitude of where the event was triggered from, if location is provided.
      - name: longitude
        description: Longitude of where the event was triggered from, if location is provided.
      - name: region
        description: Geographic region of the triggered event, if location is provided.
      - name: remote_ip
        description: IP Address of the event triggerer.
      - name: server_name
        description: Name of the server (your website) on which the event was tracked.
      - name: occurred_at
        description: Timestamp of when the event occurred.
      - name: type
        description: Type of guide event that was tracked. Can be one of `guideAdvanced`, `guideSeen`, `guideDismissed`, `guideSnoozed`, `guideTimeout`, `guideActivity`.
      - name: url
        description: URL on which the guide event was recorded.
      - name: user_agent
        description: String identifying the browser and operating system on which the event was triggered.
      - name: visitor_id
        description: Foreign key referencing the `VISITOR` who triggered the event.
      - name: _fivetran_id
        description: Fivetran created primary key.
      - name: guide_event_key
        description: Unique key hashed on ['visitor_id', 'timestamp', 'account_id', 'server_name', 'guide_id', 'user_agent', 'remote_ip', '_fivetran_id'].
        tests:
          - unique
          - not_null
      - name: guide_name
        description: Name of the guide. 
      - name: app_display_name
        description: Display name of the application that the guide is a part of. 
      - name: app_platform
        description: Platform on which the guide's application is served. 
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__page
    description: Table capturing pages - their latest state enhanced with metrics and relational information. 
    columns:
      - name: app_id
        description: Foreign key referencing the `APPLICATION` that the page is associated with.
      - name: created_at
        description: Timestamp of when the page was first created. 
      - name: created_by_user_id
        description: Foreign key referencing the `USER` who created the page. 
      - name: is_dirty
        description: Boolean value returned if page is processing at the time of request.
      - name: group_id
        description: Foreign key referencing the `GROUP` (product area) that the page is tagged under.
      - name: page_id
        description: Unique identifier of the page.
        tests:
          - unique
          - not_null
      - name: last_updated_at
        description: Timestamp of when the page was updated. 
      - name: last_updated_by_user_id
        description: Foreign key referencing the `USER` who last updated the page. 
      - name: page_name
        description: Name of the page as displayed in Pendo. 
      - name: root_version_id
        description: The unique identifier of the root entity, which nominally matches the public id field of the page.
      - name: stable_version_id
        description: The unique identifier for the current version of the page.
      - name: valid_through
        description: Timestamp that indicates when data was last processed.
      - name: rules
        description: Comma-separated list of the bare-bones URL rules of the page.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the page is tagged under. 
      - name: app_display_name
        description: Display name of the application that the page is a part of. 
      - name: app_platform
        description: Platform on which the page's application is served. 
      - name: created_by_user_full_name
        description: Full name of the internal user who first created the page. 
      - name: created_by_user_username
        description: Username (probably email) of the internal user who first created the page. 
      - name: last_updated_by_user_full_name
        description: Full name of the internal user who last updated the page. 
      - name: last_updated_by_user_username
        description: Username (probably email) of the internal user who last updated the page. 
      - name: count_active_features
        description: Count of currently-active features (defined by their `valid_through`) that live on this page.
      - name: count_visitors
        description: Total count of visitors who have viewed this page. 
      - name: count_accounts
        description: Total count of accounts who have been tracked viewing this page.
      - name: sum_pageviews
        description: The total sum of pageview interactions with this page (based on `num_events`).
      - name: count_pageview_events
        description: Count of records in `page_event` logged for this page. 
      - name: first_pageview_at
        description: Timestamp of when this page was first viewed by a visitor. 
      - name: last_pageview_at
        description: Timestamp of when this page was last viewed by a visitor. 
      - name: avg_visitor_minutes
        description: Average total time spent on this page per visitor (ignoring 0-event visitors).
      - name: avg_visitor_pageviews
        description: Average sum of pageview events per visitor (ignoring 0-event visitors).
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__page_daily_metrics
    description: >
      Table capturing daily event metrics for tracked pages, from the day that the feature was created to either 
      it's `valid_through` date or the date of its last tracked event (whichever is later).
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - page_id
            - date_day
    columns:
      - name: date_day
        description: Day for which these metrics were calculated. 
      - name: page_id
        description: Unique identifier of the page. 
      - name: page_name
        description: Name of the page. 
      - name: group_id
        description: Foreign key referencing the `GROUP` (product area) that the page is tagged under.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the page is tagged under. 
      - name: sum_pageviews
        description: Total daily number of tracked views (based on `event.num_events`) 
      - name: count_visitors
        description: Count of distinct visitors who viewed on the page on this day.
      - name: count_accounts
        description: Count of distinct accounts that were logged in `page_event` on this day. 
      - name: count_first_time_visitors
        description: Count of visitors for whom their first interaction with the page was on this day.
      - name: count_first_time_accounts
        description: Count of accounts for whom their first interaction with the page was on this day.
      - name: count_return_visitors
        description: Count of visitors who clicked on the page prior to this day as well.
      - name: count_return_accounts
        description: Count of accounts who clicked on the page prior to this day as well.
      - name: avg_daily_minutes_per_visitor
        description: For the day, the average time spent viewing the page per visitor.
      - name: avg_daily_pageviews_per_visitor
        description: For the day, the average sum of pageviews per visitor. 
      - name: percent_of_daily_pageviews
        description: Relative to the total number of views of ALL pages, the percentage that were views on this page. 
      - name: percent_of_daily_page_visitors
        description: Relative to the total number of visitors viewing ALL pages, the percentage that were visitors viewing this page. 
      - name: percent_of_daily_page_accounts
        description: Relative to the total number of accounts viewing ALL pages, the percentage that were accounts viewing this page. 
      - name: count_pageview_events
        description: Count of records in `page_event` for this page on this day.
    ref:
      - name: int_pendo__calendar_spine
      - name: int_pendo__page_daily_metrics 

  - name: pendo__page_event
    description: >
      Table capturing all recorded pageviews matching tagged pages. Contains custom
      columns passed through the `pendo__page_event_pass_through_columns` variable, as well as 
      any custom `visitor` and `account` columns.
    columns:
      - name: account_id
        description: Foreign key referencing the `ACCOUNT` associated with the event, if any.
      - name: app_id
        description: Foreign key referencing the `APPLICATION` that the event was tracked in.
      - name: num_events
        description: Number of pageviews matching tagged pages.
      - name: num_minutes
        description: >
          Page time on site calculations are in 1 minute buckets. So if you are logged in to your app as a user (Pendo Visitor) 
          when you load a page’s URL, 1 minute time on site is calculated. Every time you click on that page, the time on site 
          calculation keeps running and totaling the successive minutes you’ve spent on that page.
          See https://support.pendo.io/hc/en-us/articles/360032203171-How-is-Site-Page-Interaction-Calculated-.
      - name: page_id
        description: Foreign key referencing the `PAGE` being loaded.
      - name: remote_ip
        description: The IP address of the event triggerer.
      - name: server_name
        description: Name of the server (your website) on which the event was tracked.
      - name: occurred_at
        description: Day/hour-part timestamp of when the event occurred.
      - name: user_agent
        description: String identifying the browser and operating system on which the event was triggered.
      - name: visitor_id
        description: Foreign key referencing the `VISITOR` who triggered the event. 
      - name: _fivetran_id
        description: Fivetran created id hashed on the `param_*` fields.
      - name: page_event_key
        description: Unique key hashed on ['visitor_id', 'timestamp', 'account_id', 'server_name', 'page_id', 'user_agent', 'remote_ip', '_fivetran_id'].
        tests:
          - unique
          - not_null
      - name: previous_page_id
        description: Foreign key referencing the `page` that the visitor previously interacted with. 
      - name: previous_page_event_at
        description: Timestamp of the previous time the visitor interacted with a page. 
      - name: previous_page_num_minutes
        description: The time logged for the visitor's previous interaction with a page. 
      - name: previous_page_num_events
        description: The number of views logged for the visitor's previous interaction with a page. 
      - name: page_name
        description: Name of the page that was viewed. 
      - name: page_rules
        description: Comma-separated list of the bare-bones URL rules of the page.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the page is tagged under. 
      - name: product_area_id
        description: Foreign key referencing the `GROUP` (product area) that the page is tagged under.
      - name: app_display_name
        description: Display name of the application that the page is a part of. 
      - name: app_platform
        description: Platform on which the page's application is served. 
      - name: previous_page_name
        description: Name of the page that the visitor previously loaded.
      - name: previous_product_area_name
        description: Name of the product area (group) that the visitor's previous page is tagged under.
      - name: previous_page_product_area_id
        description: Foreign key reference to the product area (group) that the visitor's previous page is tagged under.
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__visitor
    description: >
      Table capturing individual visitors - their latest state enhanced with metrics. Includes any custom columns 
      passed through via the `pendo__account_history_pass_through_columns` variable.
    columns:
      - name: account_id
        description: >
          Foreign key referencing the `ACCOUNT` associated with this visitor. Visitors can belong to multiple accounts, however.
          Refer to `VISITOR_ACCOUNT_HISTORY` for all accounts associated with individual visitors.
      - name: first_visit_at
        description: Timestamp of when an event was first captured for the visitor.
      - name: visitor_id
        description: Unique identifier of the visitor.
        tests:
          - unique
          - not_null
      - name: visitor_id_hash
        description: 32-bit hash of the visitor ID. 
      - name: last_browser_name
        description: Most recent browser name.
      - name: last_browser_version
        description: Most recent browser version.
      - name: last_operating_system
        description: Most recent operating system.
      - name: last_server_name
        description: Most recent server name.
      - name: last_updated_at
        description: Timestamp of when the visitor was last updated.
      - name: last_user_agent
        description: Most recent user agent (unparsed).
      - name: last_visit
        description: Timestamp of the user's last visit.
      - name: n_id
        description: Numeric id for the visitor.
      - name: count_associated_accounts
        description: Count of accounts currently associated with the visitor. 
      - name: latest_nps_rating
        description: The latest NPS rating that the visitor submitted via a poll.
      - name: count_active_days
        description: Count of calendar days on which events were tracked for this visitor. 
      - name: count_active_months
        description: Count of calendar months on which events were tracked for this visitor. 
      - name: sum_minutes
        description: Total time, in minutes, of logged event activity for this visitor (based on `event.num_minutes`).
      - name: sum_events
        description: Total number of tracked events for this visitor (based on `event.num_events`) 
      - name: count_event_records
        description: Count of records in the `EVENT` table logged for this visitor. 
      - name: average_daily_minutes
        description: Of days on which they were active, the average total daily tracked time.
      - name: average_daily_events
        description: Of days on which they were active, the average total daily sum of events.
      - name: first_event_on
        description: Date on which the first event was tracked for this visitor.
      - name: last_event_on
        description: Date on which the last event was tracked for this visitor.
      - name: _fivetran_synced
        description: UTC timestamp that indicates the time when Fivetran last successfully synced the row.

  - name: pendo__visitor_daily_metrics
    description: >
      Table capturing daily event metrics for tracked visitors, from the day that ane event was first tracked for this 
      visitor to the current date.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - visitor_id
            - date_day
    columns:
      - name: date_day
        description: Day for which these metrics were calculated. 
      - name: visitor_id
        description: Unique identifier of the visitor. 
      - name: sum_minutes
        description: Total daily time, in minutes, of logged event activity for this visitor (based on `event.num_minutes`).
      - name: sum_events
        description: Total daily number of tracked events for this visitor (based on `event.num_events`) 
      - name: count_event_records
        description: Count of records in the `EVENT` table logged for this visitor on this day. 
      - name: count_pages_viewed
        description: Count of distinct pages viewed by this visitor on this day.  
      - name: count_features_clicked
        description: Count of distinct features clicked by this visitor on this day. 

  - name: pendo__visitor_feature
    description: >
      Table aggregating interactions between individual users and features. 
      Visitor-feature combinations without any interactions to date do not appear here.
    columns:
      - name: visitor_id
        description: Foreign key reference to the `visitor` interacting with the feature.
      - name: feature_id
        description: Foreign key reference to the `feature` being clicked on.
      - name: feature_name
        description: Name of the feature
      - name: product_area_id
        description: Foreign key referencing the `GROUP` (product area) that the feature is tagged under.
      - name: product_area_name
        description: Name of the product area (ie `GROUP`) that the feature is tagged under. 
      - name: first_click_at
        description: Timestamp of the first time the visitor clicked on the feature.
      - name: last_click_at
        description: Timestamp of the last time the visitor clicked on the feature.
      - name: sum_clicks
        description: The total sum of click interactions between the visitor and this feature (based on `num_events`).
      - name: sum_minutes
        description: The total interaction time between the visitor and this feature (based on `num_minutes`).
      - name: avg_daily_minutes
        description: Of the visitors' active days, the average total daily time spent interacting with the feature.
      - name: count_active_days
        description: The count of days in which the visitor interacted with the feature.
      - name: count_click_events
        description: Count of records in `feature_event` logged between the visitor and the feature.