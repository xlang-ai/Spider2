# dbt_twitter_organic v0.3.0

## Upstream Breaking Changes 
[PR #12](https://github.com/fivetran/dbt_twitter_organic_source/pull/12) from the upstream `dbt_twitter_organic_source` package includes the following breaking change updates:

- The source defined in the `src_twitter_organic.yml` file has been renamed from `twitter_organic` to `twitter` to align with the default schema name used by the upstream Fivetran connector.
    - If you're referencing sources from this package, please update your source references as needed. See below for the full scope of source changes.

| **New Source Reference** | **Old Source Reference** |
|----------------------------------|----------------------------------|
| `"{{ source('twitter','account_history') }}"` | `"{{ source('twitter_organic','account_history') }}"` |
| `"{{ source('twitter','organic_tweet_report') }}"` | `"{{ source('twitter_organic','organic_tweet_report') }}"` |
| `"{{ source('twitter','tweet') }}"` | `"{{ source('twitter_organic','tweet') }}"` |
| `"{{ source('twitter','twitter_user_history') }}"` | `"{{ source('twitter_organic','twitter_user_history') }}"` |

- The default schema name has been modified from `twitter_organic` to now be `twitter` to more closely align with the default schema name generated by the Fivetran connector. Please be aware if you were leveraging the previous default schema then you will need to update the `twitter_organic_schema` variable accordingly. 
- All identifier variables in the `src_twitter_organic.yml` file have been renamed. If youâ€™re using any of these in your project, please update them accordingly. The changes include: 
    - Prepending `twitter_organic_*` has been updated to `twitter_*` to align with the schema change.
    - The spelling of `*_identifer` has been corrected to `*_identifier`.

| **New Identifier Variable Name** | **Old Identifier Variable Name** |
|----------------------------------|----------------------------------|
| `twitter_account_history_identifier` | `twitter_organic_account_history_identifer` |
| `twitter_organic_tweet_report_identifier` | `twitter_organic_organic_tweet_report_identifer` |
| `twitter_tweet_identifier` | `twitter_organic_tweet_identifer` |
| `twitter_twitter_user_history_identifier` | `twitter_organic_twitter_user_history_identifer` |

## Bug Fixes
- Updated the `is_most_recent_record` window function in the following models to exclude the `source_relation` field from the partition statement when `twitter_organic_union_schemas` or `twitter_organic_union_databases` variables are empty. Also, modified it to skip the window function if the upstream table is empty, using the new `window_function_if_table_exists()` and `is_table_empty()` macros. This change addresses Redshift's issue with partitioning by constant expressions. ([PR #11](https://github.com/fivetran/dbt_twitter_organic/pull/11))
    - `int_twitter_organic__latest_account`
    - `int_twitter_organic__latest_user`

## Under the Hood
- Included auto-releaser GitHub Actions workflow to automate future releases. 
- Consistency validations for integration tests has been added for the `twitter_organic__tweets` model. ([PR #11](https://github.com/fivetran/dbt_twitter_organic/pull/11))
- Renamed the seed files to allow for more testing functionality. ([PR #11](https://github.com/fivetran/dbt_twitter_organic/pull/11))
- Updated the maintainer PR, Issue, Feature Request, and Config templates to resemble the most up to date format. ([PR #11](https://github.com/fivetran/dbt_twitter_organic/pull/11))
- Incorporated the new `fivetran_utils.drop_schemas_automation` macro into the end of each Buildkite integration test job. ([#7](https://github.com/fivetran/dbt_twitter_organic/pull/7))

# dbt_twitter_organic v0.2.0

## ðŸš¨ Breaking Changes ðŸš¨:
[PR #5](https://github.com/fivetran/dbt_twitter_organic/pull/5) includes the following breaking changes:
- Dispatch update for dbt-utils to dbt-core cross-db macros migration. Specifically `{{ dbt_utils.<macro> }}` have been updated to `{{ dbt.<macro> }}` for the below macros:
    - `any_value`
    - `bool_or`
    - `cast_bool_to_text`
    - `concat`
    - `date_trunc`
    - `dateadd`
    - `datediff`
    - `escape_single_quotes`
    - `except`
    - `hash`
    - `intersect`
    - `last_day`
    - `length`
    - `listagg`
    - `position`
    - `replace`
    - `right`
    - `safe_cast`
    - `split_part`
    - `string_literal`
    - `type_bigint`
    - `type_float`
    - `type_int`
    - `type_numeric`
    - `type_string`
    - `type_timestamp`
    - `array_append`
    - `array_concat`
    - `array_construct`
- For `current_timestamp` and `current_timestamp_in_utc` macros, the dispatch AND the macro names have been updated to the below, respectively:
    - `dbt.current_timestamp_backcompat`
    - `dbt.current_timestamp_in_utc_backcompat`
- Dependencies on `fivetran/fivetran_utils` have been upgraded, previously `[">=0.3.0", "<0.4.0"]` now `[">=0.4.0", "<0.5.0"]`.

# dbt_twitter_organic v0.1.0

The original release! The main focus of the package is to transform the core social media object tables into analytics-ready models that can be easily unioned in to other social media platform packages to get a single view. This is especially easy using our [Social Media Reporting package](https://github.com/fivetran/dbt_social_media_reporting).